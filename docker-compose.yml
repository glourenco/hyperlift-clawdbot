services:
  clawdbot-gateway:
    build:
      context: .
      args:
        # Optional: pin for reproducible builds
        #   CLAWDBOT_VERSION=1.2.3 docker compose up --build
        CLAWDBOT_VERSION: ${CLAWDBOT_VERSION:-latest}
    image: hyperlift-clawdbot:local
    environment:
      PORT: ${PORT:-8080}
      # Bind defaults to "lan" in start-gateway.sh (override only if you know you need it).
      # CLAWDBOT_GATEWAY_BIND: loopback|lan|tailnet|auto
      # Optional: if unset, the container will generate a token and print it to logs on first boot.
      CLAWDBOT_GATEWAY_TOKEN: ${CLAWDBOT_GATEWAY_TOKEN:-}
      # Model provider credentials (set these in Hyperlift / your local shell; do not commit real keys)
      OPENAI_API_KEY: ${OPENAI_API_KEY:-}
    ports:
      - "${PORT:-8080}:${PORT:-8080}"
    volumes: []
    # By default, use the config baked into the image.
    # If you want to tweak config locally without rebuilding, add:
    # volumes:
    #   - ./clawdbot.json:/root/.clawdbot/clawdbot.json:ro
    #
    # Optional persisted state (recommended if you care about sessions across restarts):
    # volumes:
    #   - ${HOME}/.clawdbot:/root/.clawdbot


